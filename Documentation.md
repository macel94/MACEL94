# Documentation

## Overview

This repository is a **self-updating GitHub profile README**. It pulls data from LinkedIn via the EU DMA Data Portability API, generates a polished `README.md`, a Europass CV XML, and a PDF version — all orchestrated by a GitHub Actions workflow.

```
LinkedIn Profile → DMA Portability API → C# Scripts (.NET 10) → README.md + CV → GitHub Actions (auto-commit)
```

## Repository Structure

```
.
├── README.md                                 # Auto-generated GitHub profile (do not edit manually)
├── Documentation.md                          # This file
├── .github/workflows/update-readme.yml       # GitHub Actions workflow
├── src/                                      # Source code
│   ├── fetch_linkedin.cs                     # Fetches LinkedIn data via DMA API
│   ├── generate_readme.cs                    # Generates README.md from LinkedIn JSON
│   ├── generate_cv.cs                        # Generates Europass CV XML
│   ├── generate_pdf.sh                       # Converts README → PDF (pandoc + Puppeteer)
│   ├── html_to_pdf.js                        # Puppeteer script for HTML → PDF rendering
│   ├── run.sh                                # Orchestrator script (fetch → generate → PDF)
│   ├── attachment.xml                        # Reference Europass XML schema
│   ├── package.json                          # Node.js dependencies (puppeteer)
│   ├── package-lock.json                     # Lockfile
│   └── .gitignore                            # Ignores linkedin_raw.json (cached API data)
└── artifacts/                                # Generated output (committed by CI)
    ├── profile/
    │   ├── stats.svg                         # GitHub stats card
    │   └── top-langs.svg                     # Top languages card
    ├── europass_cv.xml                       # Europass CV XML
    ├── Francesco_Belacca_CV.pdf              # PDF version of the README/CV
    └── github-markdown.css                   # Cached GitHub markdown stylesheet
```

## How It Works

### Data Source: LinkedIn DMA Portability API

As an EU/EEA citizen, the [Digital Markets Act](https://learn.microsoft.com/en-us/linkedin/dma/member-data-portability/member-data-portability-member/) grants the right to programmatically access LinkedIn data. This project uses two LinkedIn APIs:

| API | Endpoint | Purpose |
|---|---|---|
| **Member Snapshot API** | `GET /rest/memberSnapshotData?q=criteria&domain=<DOMAIN>` | Point-in-time snapshot of profile data across 50+ domains |
| **Member Changelog API** | `GET /rest/memberChangeLogs?q=memberAndApplication` | Real-time change events (posts, comments, reactions) from the last 28 days |

### Snapshot Domains Used

| Domain | Description |
|---|---|
| `PROFILE` | Name, headline, summary, location, industry |
| `POSITIONS` | Work experience (title, company, dates, description) |
| `EDUCATION` | Schools, degrees, fields of study |
| `SKILLS` | All skills on your profile |
| `CERTIFICATIONS` | Certifications with authority and dates |
| `COURSES` | Courses listed on your profile |
| `LANGUAGES` | Languages and proficiency levels |
| `HONORS` | Awards and honors |
| `PUBLICATIONS` | Published works |
| `PATENTS` | Patents |
| `PROJECTS` | Projects with descriptions and URLs |
| `ORGANIZATIONS` | Organization memberships |
| `VOLUNTEERING_EXPERIENCES` | Volunteer roles |
| `RECOMMENDATIONS` | Recommendations received |
| `ENDORSEMENTS` | Skill endorsements |
| `CAUSES_YOU_CARE_ABOUT` | Causes you support |
| `PROFILE_SUMMARY` | AI-generated profile summary |

### Pipeline Steps

1. **`src/fetch_linkedin.cs`** — Fetches all relevant domains from the Member Snapshot API and saves raw JSON to `src/linkedin_raw.json` (gitignored).
2. **`src/generate_readme.cs`** — Parses the cached JSON and generates a formatted `README.md` at the repo root.
3. **`src/generate_cv.cs`** — Generates a Europass-compliant CV XML from the same data, written to `artifacts/europass_cv.xml`.
4. **GitHub Stats SVGs** — Generated by a GitHub Action in CI, saved to `artifacts/profile/`.
5. **`src/generate_pdf.sh`** — Converts the README to PDF using pandoc (markdown → HTML) and Puppeteer/headless Chromium (HTML → PDF), then embeds the Europass XML as a PDF attachment. Output: `artifacts/Francesco_Belacca_CV.pdf`.

All scripts use .NET 10 [file-based apps](https://devblogs.microsoft.com/dotnet/announcing-dotnet-run-app/) — no `.csproj`, no `dotnet restore`, no compilation step needed.

### Other Available LinkedIn Domains (not used, but queryable)

`ADS_CLICKED`, `MEMBER_FOLLOWING`, `login`, `RICH_MEDIA`, `SEARCHES`, `INFERENCE_TAKEOUT`, `ALL_COMMENTS`, `CONTACTS`, `Events`, `RECEIPTS`, `AD_TARGETING`, `REGISTRATION`, `REVIEWS`, `ARTICLES`, `GROUPS`, `COMPANY_FOLLOWS`, `INVITATIONS`, `PHONE_NUMBERS`, `CONNECTIONS`, `EMAIL_ADDRESSES`, `JOB_POSTINGS`, `JOB_APPLICATIONS`, `JOB_SEEKER_PREFERENCES`, `LEARNING`, `INBOX`, `SAVED_JOBS`, `SAVED_JOB_ALERTS`, `TEST_SCORES`, `MEMBER_SHARE_INFO`, `SECURITY_CHALLENGE_PIPE`, `TRUSTED_GRAPH`, `MARKETPLACE_ENGAGEMENTS`, `MARKETPLACE_PROVIDERS`, `MARKETPLACE_OPPORTUNITIES`, `ACTOR_SAVE_ITEM`, `JOB_APPLICANT_SAVED_ANSWERS`, `TALENT_QUESTION_SAVED_RESPONSE`, `ALL_LIKES`, `ALL_VOTES`, `RECEIPTS_LBP`, `easyapply-blocking`, `LEARNING_COACH_AI_TAKEOUT`, `LEARNING_COACH_INBOX`, `LEARNING_ROLEPLAY_INBOX`, `ACCOUNT_HISTORY`, `INSTANT_REPOSTS`, `IDENTITY_CREDENTIALS_AND_ASSETS`, `ADS_LAN`

## Setup (One-Time)

### 1. Create a LinkedIn Developer Application

1. Go to [LinkedIn Developers](https://developer.linkedin.com/)
2. Create a new app
3. **Important**: Use the default company page **"Member Data Portability (Member) Default Company"** — do NOT create a new company page
4. Go to the **Products** tab and request access to **"Member Data Portability API (Member)"**
5. Agree to the Terms & Conditions

### 2. Generate an Access Token

1. In the developer portal, go to **Docs and tools → OAuth Token Tools**
2. Click **Create token**
3. Select your app
4. Select scope **`r_dma_portability_self_serve`**
5. Click **Request access token**
6. Log in and click **Allow**
7. Copy the generated token

> ⚠️ The token expires (typically 60 days). You'll need to regenerate it when it does. There is currently no way to get a refresh token via this self-serve flow.

### 3. Add the Token to GitHub Secrets

1. Go to your repo → **Settings → Secrets and variables → Actions**
2. Click **New repository secret**
3. Name: `LINKEDIN_ACCESS_TOKEN`
4. Value: paste the token from step 2

### 4. Run the Workflow

- Go to **Actions → Update README from LinkedIn → Run workflow**
- Or wait for the weekly schedule (every Monday at 06:00 UTC)

## Local Development

Requires [.NET 10 SDK](https://dotnet.microsoft.com/download/dotnet/10.0) or later.

```bash
export LINKEDIN_ACCESS_TOKEN="your_token_here"
./src/run.sh
```

Or run individual steps:

```bash
# Fetch LinkedIn data
dotnet run src/fetch_linkedin.cs

# Generate README (requires src/linkedin_raw.json from the fetch step)
dotnet run src/generate_readme.cs

# Generate Europass CV XML
dotnet run src/generate_cv.cs

# Generate PDF (requires pandoc, Node.js, and the artifacts/profile SVGs)
./src/generate_pdf.sh
```

### API Authentication

All LinkedIn API requests use:
```
Authorization: Bearer <access_token>
Linkedin-Version: 202312
Content-Type: application/json
```

### Rate Limits

LinkedIn enforces rate limits. The script makes one request per domain — with 17 domains, that's ~17+ requests per run (more with pagination). The weekly schedule is very conservative.
