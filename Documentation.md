# Documentation

## Overview

This repository is a **self-updating GitHub profile README**. It pulls data from LinkedIn via the EU DMA Data Portability API, generates a polished `README.md`, a Europass CV XML, and a PDF version â€” all orchestrated by a GitHub Actions workflow.

```
LinkedIn Profile â†’ DMA Portability API â†’ C# Scripts (.NET 10) â†’ README.md + CV â†’ GitHub Actions (auto-commit)
```

## Repository Structure

```
.
â”œâ”€â”€ README.md                                 # Auto-generated GitHub profile (do not edit manually)
â”œâ”€â”€ Documentation.md                          # This file
â”œâ”€â”€ .github/workflows/update-readme.yml       # GitHub Actions workflow
â”œâ”€â”€ src/                                      # Source code
â”‚   â”œâ”€â”€ fetch_linkedin.cs                     # Fetches LinkedIn data via DMA API
â”‚   â”œâ”€â”€ generate_readme.cs                    # Generates README.md from LinkedIn JSON
â”‚   â”œâ”€â”€ generate_cv.cs                        # Generates Europass CV XML
â”‚   â”œâ”€â”€ generate_pdf.sh                       # Converts README â†’ PDF (pandoc + Puppeteer)
â”‚   â”œâ”€â”€ html_to_pdf.js                        # Puppeteer script for HTML â†’ PDF rendering
â”‚   â”œâ”€â”€ run.sh                                # Orchestrator script (fetch â†’ generate â†’ PDF)
â”‚   â”œâ”€â”€ attachment.xml                        # Reference Europass XML schema
â”‚   â”œâ”€â”€ package.json                          # Node.js dependencies (puppeteer)
â”‚   â”œâ”€â”€ package-lock.json                     # Lockfile
â”‚   â””â”€â”€ .gitignore                            # Ignores linkedin_raw.json (cached API data)
â””â”€â”€ artifacts/                                # Generated output (committed by CI)
    â”œâ”€â”€ profile/
    â”‚   â”œâ”€â”€ stats.svg                         # GitHub stats card
    â”‚   â””â”€â”€ top-langs.svg                     # Top languages card
    â”œâ”€â”€ europass_cv.xml                       # Europass CV XML
    â”œâ”€â”€ Francesco_Belacca_CV.pdf              # PDF version of the README/CV
    â””â”€â”€ github-markdown.css                   # Cached GitHub markdown stylesheet
```

## How It Works

### Data Source: LinkedIn DMA Portability API

As an EU/EEA citizen, the [Digital Markets Act](https://learn.microsoft.com/en-us/linkedin/dma/member-data-portability/member-data-portability-member/) grants the right to programmatically access LinkedIn data. This project uses two LinkedIn APIs:

| API | Endpoint | Purpose |
|---|---|---|
| **Member Snapshot API** | `GET /rest/memberSnapshotData?q=criteria&domain=<DOMAIN>` | Point-in-time snapshot of profile data across 50+ domains |
| **Member Changelog API** | `GET /rest/memberChangeLogs?q=memberAndApplication` | Real-time change events (posts, comments, reactions) from the last 28 days |

### Snapshot Domains Used

| Domain | Description |
|---|---|
| `PROFILE` | Name, headline, summary, location, industry |
| `POSITIONS` | Work experience (title, company, dates, description) |
| `EDUCATION` | Schools, degrees, fields of study |
| `SKILLS` | All skills on your profile |
| `CERTIFICATIONS` | Certifications with authority and dates |
| `COURSES` | Courses listed on your profile |
| `LANGUAGES` | Languages and proficiency levels |
| `HONORS` | Awards and honors |
| `PUBLICATIONS` | Published works |
| `PATENTS` | Patents |
| `PROJECTS` | Projects with descriptions and URLs |
| `ORGANIZATIONS` | Organization memberships |
| `VOLUNTEERING_EXPERIENCES` | Volunteer roles |
| `RECOMMENDATIONS` | Recommendations received |
| `ENDORSEMENTS` | Skill endorsements |
| `CAUSES_YOU_CARE_ABOUT` | Causes you support |
| `PROFILE_SUMMARY` | AI-generated profile summary |

### Pipeline Steps

1. **`src/fetch_linkedin.cs`** â€” Fetches all relevant domains from the Member Snapshot API and saves raw JSON to `src/linkedin_raw.json` (gitignored).
2. **`src/generate_readme.cs`** â€” Parses the cached JSON and generates a formatted `README.md` at the repo root.
3. **`src/generate_cv.cs`** â€” Generates a Europass-compliant CV XML from the same data, written to `artifacts/europass_cv.xml`.
4. **GitHub Stats SVGs** â€” Generated by a GitHub Action in CI, saved to `artifacts/profile/`.
5. **`src/generate_pdf.sh`** â€” Converts the README to PDF using pandoc (markdown â†’ HTML) and Puppeteer/headless Chromium (HTML â†’ PDF), then embeds the Europass XML as a PDF attachment. Output: `artifacts/Francesco_Belacca_CV.pdf`.

All scripts use .NET 10 [file-based apps](https://devblogs.microsoft.com/dotnet/announcing-dotnet-run-app/) â€” no `.csproj`, no `dotnet restore`, no compilation step needed.

### Other Available LinkedIn Domains (not used, but queryable)

`ADS_CLICKED`, `MEMBER_FOLLOWING`, `login`, `RICH_MEDIA`, `SEARCHES`, `INFERENCE_TAKEOUT`, `ALL_COMMENTS`, `CONTACTS`, `Events`, `RECEIPTS`, `AD_TARGETING`, `REGISTRATION`, `REVIEWS`, `ARTICLES`, `GROUPS`, `COMPANY_FOLLOWS`, `INVITATIONS`, `PHONE_NUMBERS`, `CONNECTIONS`, `EMAIL_ADDRESSES`, `JOB_POSTINGS`, `JOB_APPLICATIONS`, `JOB_SEEKER_PREFERENCES`, `LEARNING`, `INBOX`, `SAVED_JOBS`, `SAVED_JOB_ALERTS`, `TEST_SCORES`, `MEMBER_SHARE_INFO`, `SECURITY_CHALLENGE_PIPE`, `TRUSTED_GRAPH`, `MARKETPLACE_ENGAGEMENTS`, `MARKETPLACE_PROVIDERS`, `MARKETPLACE_OPPORTUNITIES`, `ACTOR_SAVE_ITEM`, `JOB_APPLICANT_SAVED_ANSWERS`, `TALENT_QUESTION_SAVED_RESPONSE`, `ALL_LIKES`, `ALL_VOTES`, `RECEIPTS_LBP`, `easyapply-blocking`, `LEARNING_COACH_AI_TAKEOUT`, `LEARNING_COACH_INBOX`, `LEARNING_ROLEPLAY_INBOX`, `ACCOUNT_HISTORY`, `INSTANT_REPOSTS`, `IDENTITY_CREDENTIALS_AND_ASSETS`, `ADS_LAN`

## Setup (One-Time)

### 1. Create a LinkedIn Developer Application

1. Go to [LinkedIn Developers](https://developer.linkedin.com/)
2. Create a new app
3. **Important**: Use the default company page **"Member Data Portability (Member) Default Company"** â€” do NOT create a new company page
4. Go to the **Products** tab and request access to **"Member Data Portability API (Member)"**
5. Agree to the Terms & Conditions

### 2. Generate an Access Token

1. In the developer portal, go to **Docs and tools â†’ OAuth Token Tools**
2. Click **Create token**
3. Select your app
4. Select scope **`r_dma_portability_self_serve`**
5. Click **Request access token**
6. Log in and click **Allow**
7. Copy the generated token

> âš ï¸ The token expires (typically 60 days). You'll need to regenerate it when it does. There is currently no way to get a refresh token via this self-serve flow.

### 3. Add the Token to GitHub Secrets

1. Go to your repo â†’ **Settings â†’ Secrets and variables â†’ Actions**
2. Click **New repository secret**
3. Name: `LINKEDIN_ACCESS_TOKEN`
4. Value: paste the token from step 2

### 4. Run the Workflow

- Go to **Actions â†’ Update README from LinkedIn â†’ Run workflow**
- Or wait for the weekly schedule (every Monday at 06:00 UTC)

## Workflows

### Base recurring workflow (single source of truth)

`/.github/workflows/update-readme.yml`

- **Trigger**: Weekly schedule (`0 6 * * 1`) + manual `workflow_dispatch`
- **Purpose**: Keep your LinkedIn profile as the canonical source, then regenerate:
  - `README.md`
  - `artifacts/europass_cv.xml`
  - `artifacts/Francesco_Belacca_CV.pdf` (with embedded Europass XML attachment)
  - `artifacts/profile/*.svg` stats cards
- **Result**: Your GitHub profile README and CV assets stay continuously aligned with the same data source.

### Manually triggered custom CV workflows (role-tailored)

The repository also includes manual workflows that generate role-specific CV packages:

- `/.github/workflows/generate-cv-cloud-sre.yml`
- `/.github/workflows/generate-cv-cloud-devops.yml`
- `/.github/workflows/generate-cv-cloud-swdev.yml`

How they work:
1. `src/tailor_readme.sh` calls **GitHub Models** (`openai/gpt-4.1`) to rewrite selected sections of the base README for the target role.
2. `src/generate_role_pdf.sh` renders a role-specific PDF and embeds the same Europass XML.
3. Outputs are committed under `artifacts/<role>/`.

This gives you:
- one canonical profile dataset for consistency,
- one baseline recurring CV pipeline,
- and multiple role-specific CV variants on demand.

## LinkedIn API and token guide (researched references)

This project uses LinkedInâ€™s **Member Data Portability (Member) API**:

- Official API guide:  
  https://learn.microsoft.com/en-us/linkedin/dma/member-data-portability/member-data-portability-member/
- LinkedIn API docs entrypoint:  
  https://learn.microsoft.com/en-us/linkedin/

Official authentication/token references:

- Getting access to LinkedIn APIs:  
  https://learn.microsoft.com/en-us/linkedin/shared/authentication/getting-access
- OAuth overview:  
  https://learn.microsoft.com/en-us/linkedin/shared/authentication/authentication
- 3-legged OAuth flow:  
  https://learn.microsoft.com/en-us/linkedin/shared/authentication/authorization-code-flow

In practice for this repo, token creation is done in **LinkedIn Developer Portal â†’ Docs and tools â†’ OAuth Token Tools** with the scope `r_dma_portability_self_serve`.

### Why this is available to Europeans (EU/EEA context)

The portability capability is tied to compliance with the **EU Digital Markets Act (DMA)**, which introduces data portability obligations for designated gatekeepers in the EU. LinkedInâ€™s Member Data Portability product is designed around these regulatory requirements, which is why availability is region-scoped to European users rather than globally.

Reference:
- EU Digital Markets Act (Regulation (EU) 2022/1925):  
  https://eur-lex.europa.eu/eli/reg/2022/1925/oj

## Copy-ready LinkedIn post (high engagement)

> ğŸš€ I just open-sourced my LinkedIn â†’ GitHub automation pipeline:  
> **https://github.com/macel94/macel94**
>
> I wanted my professional profile to have a **single source of truth**.  
> So I built a workflow that turns my LinkedIn profile data into:
> - âœ… an always up-to-date GitHub `README.md`
> - âœ… a generated CV PDF
> - âœ… a standards-based **Europass XML** embedded into the PDF
>
> Why this matters:
> - No more copy/paste drift between LinkedIn, GitHub, and CV versions
> - Recruiters and collaborators always see fresh information
> - Anyone can fork the repo and adapt it to keep their own portfolio + CV in sync
>
> Bonus: I also added manual workflows for **role-tailored CVs** (SRE, DevOps, Cloud Software Developer) powered by GitHub Models.
>
> If you want your GitHub profile and CV to auto-maintain themselves, this repo is plug-and-play.  
> Happy to hear feedback or ideas for the next iteration ğŸ‘‡
>
> #opensource #github #linkedin #automation #devops #sre #cloud #dotnet #career #europass

## Local Development

Requires [.NET 10 SDK](https://dotnet.microsoft.com/download/dotnet/10.0) or later.

```bash
export LINKEDIN_ACCESS_TOKEN="your_token_here"
./src/run.sh
```

Or run individual steps:

```bash
# Fetch LinkedIn data
dotnet run src/fetch_linkedin.cs

# Generate README (requires src/linkedin_raw.json from the fetch step)
dotnet run src/generate_readme.cs

# Generate Europass CV XML
dotnet run src/generate_cv.cs

# Generate PDF (requires pandoc, Node.js, and the artifacts/profile SVGs)
./src/generate_pdf.sh
```

### API Authentication

All LinkedIn API requests use:
```
Authorization: Bearer <access_token>
Linkedin-Version: 202312
Content-Type: application/json
```

### Rate Limits

LinkedIn enforces rate limits. The script makes one request per domain â€” with 17 domains, that's ~17+ requests per run (more with pagination). The weekly schedule is very conservative.
